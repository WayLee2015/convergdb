{
    "version": 3,
    "terraform_version": "0.10.6",
    "serial": 1,
    "lineage": "a1642d89-f190-428f-a300-f41a742c10fb",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2018-02-07 23:53:57.492965005 +0000 UTC",
                        "attributes": {
                            "account_id": "692977618922",
                            "arn": "arn:aws:iam::692977618922:user/jeremy",
                            "id": "2018-02-07 23:53:57.492965005 +0000 UTC",
                            "user_id": "AIDAIGO4NAUHESNO4335Q"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "random_id.convergdb_deployment_id": {
                    "type": "random_id",
                    "depends_on": [],
                    "primary": {
                        "id": "1F1vfiLv-gE",
                        "attributes": {
                            "b64": "1F1vfiLv-gE",
                            "b64_std": "1F1vfiLv+gE=",
                            "b64_url": "1F1vfiLv-gE",
                            "byte_length": "8",
                            "dec": "15302509696417528321",
                            "hex": "d45d6f7e22effa01",
                            "id": "1F1vfiLv-gE"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "aws_glue_nightly_batch"
            ],
            "outputs": {
                "module_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "2823741295544373327"
                }
            },
            "resources": {
                "aws_cloudformation_stack.glue_etl_stack": {
                    "type": "aws_cloudformation_stack",
                    "depends_on": [
                        "aws_iam_role.glue_service_role",
                        "aws_iam_role_policy.s3_access",
                        "aws_iam_role_policy_attachment.attach_glue_service",
                        "aws_s3_bucket_object.library_object",
                        "aws_s3_bucket_object.script_object",
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-glue-nightly--batch-15302509696417528321-2823741295544373327/2cce0e30-0c62-11e8-8167-500c32c86c35",
                        "attributes": {
                            "disable_rollback": "false",
                            "iam_role_arn": "",
                            "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-glue-nightly--batch-15302509696417528321-2823741295544373327/2cce0e30-0c62-11e8-8167-500c32c86c35",
                            "name": "convergdb-glue-nightly--batch-15302509696417528321-2823741295544373327",
                            "outputs.%": "0",
                            "parameters.%": "0",
                            "tags.%": "2",
                            "tags.convergdb:deployment": "15302509696417528321",
                            "tags.convergdb:module": "2823741295544373327",
                            "template_body": "AWSTemplateFormatVersion: \"2010-09-09\"                                          \nDescription: Glue ETL Job and Schedule\n\nResources:\n\n  GlueJob:\n    Type: \"AWS::Glue::Job\"\n    Properties:\n      Name: \"nightly_batch\"\n      Role: convergdb-nightly_batch-2823741295544373327\n      DefaultArguments:\n        \"--extra-py-files\": \"s3://convergdb-admin-f13f80a0c63d373f/15302509696417528321/scripts/aws_glue/nightly_batch/convergdb_pyspark_library.py\"\n        \"--convergdb_deployment_id\": 15302509696417528321\n      Command: \n        Name: glueetl\n        ScriptLocation: \"s3://convergdb-admin-f13f80a0c63d373f/15302509696417528321/scripts/aws_glue/nightly_batch/nightly_batch.py\"\n      AllocatedCapacity: 2\n\n  ScheduledGlueTrigger:\n    Type: \"AWS::Glue::Trigger\"\n    Properties:\n      Type: SCHEDULED\n      Name: \"convergdb-nightly_batch\"\n      Schedule: \"cron(0 0 * * ? *)\"\n      Actions:\n        - JobName: !Ref GlueJob\n"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 1800000000000,
                                "delete": 1800000000000,
                                "update": 1800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_iam_role.glue_service_role": {
                    "type": "aws_iam_role",
                    "depends_on": [
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "convergdb-nightly_batch-2823741295544373327",
                        "attributes": {
                            "arn": "arn:aws:iam::692977618922:role/convergdb-nightly_batch-2823741295544373327",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"glue.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2018-02-07T23:54:01Z",
                            "force_detach_policies": "false",
                            "id": "convergdb-nightly_batch-2823741295544373327",
                            "name": "convergdb-nightly_batch-2823741295544373327",
                            "path": "/",
                            "unique_id": "AROAJ2225HY26XSAYAH2A"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_iam_role_policy.s3_access": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.glue_service_role",
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "convergdb-nightly_batch-2823741295544373327:convergdb-nightly_batch-s3-access-policy-2823741295544373327",
                        "attributes": {
                            "id": "convergdb-nightly_batch-2823741295544373327:convergdb-nightly_batch-s3-access-policy-2823741295544373327",
                            "name": "convergdb-nightly_batch-s3-access-policy-2823741295544373327",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"athena:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n",
                            "role": "convergdb-nightly_batch-2823741295544373327"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_iam_role_policy_attachment.attach_glue_service": {
                    "type": "aws_iam_role_policy_attachment",
                    "depends_on": [
                        "aws_iam_role.glue_service_role"
                    ],
                    "primary": {
                        "id": "convergdb-nightly_batch-2823741295544373327-20180207235402395100000001",
                        "attributes": {
                            "id": "convergdb-nightly_batch-2823741295544373327-20180207235402395100000001",
                            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
                            "role": "convergdb-nightly_batch-2823741295544373327"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_s3_bucket_object.library_object": {
                    "type": "aws_s3_bucket_object",
                    "depends_on": [
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "15302509696417528321/scripts/aws_glue/nightly_batch/convergdb_pyspark_library.py",
                        "attributes": {
                            "acl": "private",
                            "bucket": "convergdb-admin-f13f80a0c63d373f",
                            "cache_control": "",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "binary/octet-stream",
                            "etag": "2d554dcf3eec9c40859768720ee9e3cf",
                            "id": "15302509696417528321/scripts/aws_glue/nightly_batch/convergdb_pyspark_library.py",
                            "key": "15302509696417528321/scripts/aws_glue/nightly_batch/convergdb_pyspark_library.py",
                            "server_side_encryption": "",
                            "source": "/coding/demo/demo2/terraform/aws_glue/convergdb_pyspark_library.py",
                            "storage_class": "STANDARD",
                            "tags.%": "2",
                            "tags.convergdb:deployment": "15302509696417528321",
                            "tags.convergdb:module": "2823741295544373327",
                            "version_id": "9pssLNc_zTUFF.ZSfX5JDFy6PPPDTU7S",
                            "website_redirect": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_s3_bucket_object.script_object": {
                    "type": "aws_s3_bucket_object",
                    "depends_on": [
                        "data.template_file.script_object_source",
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "15302509696417528321/scripts/aws_glue/nightly_batch/nightly_batch.py",
                        "attributes": {
                            "acl": "private",
                            "bucket": "convergdb-admin-f13f80a0c63d373f",
                            "cache_control": "",
                            "content": "import convergdb_pyspark_library\n\nconvergdb_pyspark_library.source_to_target(\n\"\"\"\n{\n  \"generators\": [\n    \"athena\",\n    \"glue\",\n    \"markdown_doc\",\n    \"html_doc\",\n    \"control_table\"\n  ],\n  \"full_relation_name\": \"production.ecommerce.inventory.books\",\n  \"dsd\": \"ecommerce.inventory.books\",\n  \"environment\": \"production\",\n  \"domain_name\": null,\n  \"schema_name\": null,\n  \"relation_name\": null,\n  \"service_role\": \"\",\n  \"script_bucket\": \"convergdb-admin-f13f80a0c63d373f\",\n  \"temp_s3_location\": null,\n  \"storage_bucket\": \"convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books\",\n  \"state_bucket\": \"convergdb-admin-f13f80a0c63d373f\",\n  \"storage_format\": \"parquet\",\n  \"source_relation_prefix\": null,\n  \"etl_job_name\": \"nightly_batch\",\n  \"etl_job_schedule\": \"cron(0 0 * * ? *)\",\n  \"attributes\": [\n    {\n      \"name\": \"item_number\",\n      \"required\": false,\n      \"expression\": \"item_number\",\n      \"data_type\": \"integer\",\n      \"field_type\": null,\n      \"cast_type\": \"integer\"\n    },\n    {\n      \"name\": \"title\",\n      \"required\": false,\n      \"expression\": \"title\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"author\",\n      \"required\": false,\n      \"expression\": \"author\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"price\",\n      \"required\": false,\n      \"expression\": \"price\",\n      \"data_type\": \"numeric(10,2)\",\n      \"field_type\": null,\n      \"cast_type\": \"decimal(10,2)\"\n    },\n    {\n      \"name\": \"part_id\",\n      \"required\": false,\n      \"expression\": \"substring(md5(title),1,1)\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"retail_markup\",\n      \"required\": false,\n      \"expression\": \"price * 0.25\",\n      \"data_type\": \"numeric(10,2)\",\n      \"field_type\": null,\n      \"cast_type\": \"decimal(10,2)\"\n    }\n  ],\n  \"partitions\": [\n    \"part_id\"\n  ],\n  \"relation_type\": 1,\n  \"source_dsd_name\": \"ecommerce.inventory.books_source\",\n  \"full_source_relation_name\": \"production.ecommerce.inventory.books_source\",\n  \"source_structure\": {\n    \"generators\": [\n      \"s3_source\",\n      \"markdown_doc\",\n      \"html_doc\"\n    ],\n    \"dsd\": \"ecommerce.inventory.books_source\",\n    \"full_relation_name\": \"production.ecommerce.inventory.books_source\",\n    \"environment\": \"production\",\n    \"domain_name\": null,\n    \"schema_name\": null,\n    \"relation_name\": null,\n    \"storage_bucket\": \"demo-source-us-west-2.beyondsoft.us\",\n    \"storage_format\": \"json\",\n    \"attributes\": [\n      {\n        \"name\": \"item_number\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"integer\",\n        \"field_type\": null,\n        \"cast_type\": \"integer\"\n      },\n      {\n        \"name\": \"title\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"varchar(100)\",\n        \"field_type\": null,\n        \"cast_type\": \"string\"\n      },\n      {\n        \"name\": \"author\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"varchar(100)\",\n        \"field_type\": null,\n        \"cast_type\": \"string\"\n      },\n      {\n        \"name\": \"price\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"numeric(10,2)\",\n        \"field_type\": null,\n        \"cast_type\": \"decimal(10,2)\"\n      },\n      {\n        \"name\": \"stock\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"integer\",\n        \"field_type\": null,\n        \"cast_type\": \"integer\"\n      }\n    ],\n    \"partitions\": [\n\n    ],\n    \"relation_type\": 0,\n    \"source_dsd_name\": null,\n    \"working_path\": \"/coding/demo/demo2\"\n  },\n  \"working_path\": \"/coding/demo/demo2\",\n  \"deployment_id\": \"15302509696417528321\",\n  \"region\": \"us-west-2\"\n}\n\"\"\",\nlambda doc : {\n  \"item_number\" : doc.get(\"item_number\",None),\n  \"title\" : doc.get(\"title\",None),\n  \"author\" : doc.get(\"author\",None),\n  \"price\" : doc.get(\"price\",None),\n  \"stock\" : doc.get(\"stock\",None)\n}\n)\n\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "binary/octet-stream",
                            "etag": "fa9660a41ffacf57d66e3f512f435377",
                            "id": "15302509696417528321/scripts/aws_glue/nightly_batch/nightly_batch.py",
                            "key": "15302509696417528321/scripts/aws_glue/nightly_batch/nightly_batch.py",
                            "server_side_encryption": "",
                            "storage_class": "STANDARD",
                            "tags.%": "2",
                            "tags.convergdb:deployment": "15302509696417528321",
                            "tags.convergdb:module": "2823741295544373327",
                            "version_id": "OG_wi1gyufs.D9T0YtbHcTACOY96edDM",
                            "website_redirect": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "data.template_file.script_object_source": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "7911e8fa0a634bcd926fcf8a96b037df790699cab6f73a9d7d8d00d8d66f7bb7",
                        "attributes": {
                            "id": "7911e8fa0a634bcd926fcf8a96b037df790699cab6f73a9d7d8d00d8d66f7bb7",
                            "rendered": "import convergdb_pyspark_library\n\nconvergdb_pyspark_library.source_to_target(\n\"\"\"\n{\n  \"generators\": [\n    \"athena\",\n    \"glue\",\n    \"markdown_doc\",\n    \"html_doc\",\n    \"control_table\"\n  ],\n  \"full_relation_name\": \"production.ecommerce.inventory.books\",\n  \"dsd\": \"ecommerce.inventory.books\",\n  \"environment\": \"production\",\n  \"domain_name\": null,\n  \"schema_name\": null,\n  \"relation_name\": null,\n  \"service_role\": \"\",\n  \"script_bucket\": \"convergdb-admin-f13f80a0c63d373f\",\n  \"temp_s3_location\": null,\n  \"storage_bucket\": \"convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books\",\n  \"state_bucket\": \"convergdb-admin-f13f80a0c63d373f\",\n  \"storage_format\": \"parquet\",\n  \"source_relation_prefix\": null,\n  \"etl_job_name\": \"nightly_batch\",\n  \"etl_job_schedule\": \"cron(0 0 * * ? *)\",\n  \"attributes\": [\n    {\n      \"name\": \"item_number\",\n      \"required\": false,\n      \"expression\": \"item_number\",\n      \"data_type\": \"integer\",\n      \"field_type\": null,\n      \"cast_type\": \"integer\"\n    },\n    {\n      \"name\": \"title\",\n      \"required\": false,\n      \"expression\": \"title\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"author\",\n      \"required\": false,\n      \"expression\": \"author\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"price\",\n      \"required\": false,\n      \"expression\": \"price\",\n      \"data_type\": \"numeric(10,2)\",\n      \"field_type\": null,\n      \"cast_type\": \"decimal(10,2)\"\n    },\n    {\n      \"name\": \"part_id\",\n      \"required\": false,\n      \"expression\": \"substring(md5(title),1,1)\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"retail_markup\",\n      \"required\": false,\n      \"expression\": \"price * 0.25\",\n      \"data_type\": \"numeric(10,2)\",\n      \"field_type\": null,\n      \"cast_type\": \"decimal(10,2)\"\n    }\n  ],\n  \"partitions\": [\n    \"part_id\"\n  ],\n  \"relation_type\": 1,\n  \"source_dsd_name\": \"ecommerce.inventory.books_source\",\n  \"full_source_relation_name\": \"production.ecommerce.inventory.books_source\",\n  \"source_structure\": {\n    \"generators\": [\n      \"s3_source\",\n      \"markdown_doc\",\n      \"html_doc\"\n    ],\n    \"dsd\": \"ecommerce.inventory.books_source\",\n    \"full_relation_name\": \"production.ecommerce.inventory.books_source\",\n    \"environment\": \"production\",\n    \"domain_name\": null,\n    \"schema_name\": null,\n    \"relation_name\": null,\n    \"storage_bucket\": \"demo-source-us-west-2.beyondsoft.us\",\n    \"storage_format\": \"json\",\n    \"attributes\": [\n      {\n        \"name\": \"item_number\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"integer\",\n        \"field_type\": null,\n        \"cast_type\": \"integer\"\n      },\n      {\n        \"name\": \"title\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"varchar(100)\",\n        \"field_type\": null,\n        \"cast_type\": \"string\"\n      },\n      {\n        \"name\": \"author\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"varchar(100)\",\n        \"field_type\": null,\n        \"cast_type\": \"string\"\n      },\n      {\n        \"name\": \"price\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"numeric(10,2)\",\n        \"field_type\": null,\n        \"cast_type\": \"decimal(10,2)\"\n      },\n      {\n        \"name\": \"stock\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"integer\",\n        \"field_type\": null,\n        \"cast_type\": \"integer\"\n      }\n    ],\n    \"partitions\": [\n\n    ],\n    \"relation_type\": 0,\n    \"source_dsd_name\": null,\n    \"working_path\": \"/coding/demo/demo2\"\n  },\n  \"working_path\": \"/coding/demo/demo2\",\n  \"deployment_id\": \"15302509696417528321\",\n  \"region\": \"us-west-2\"\n}\n\"\"\",\nlambda doc : {\n  \"item_number\" : doc.get(\"item_number\",None),\n  \"title\" : doc.get(\"title\",None),\n  \"author\" : doc.get(\"author\",None),\n  \"price\" : doc.get(\"price\",None),\n  \"stock\" : doc.get(\"stock\",None)\n}\n)\n\n",
                            "template": "import convergdb_pyspark_library\n\nconvergdb_pyspark_library.source_to_target(\n\"\"\"\n{\n  \"generators\": [\n    \"athena\",\n    \"glue\",\n    \"markdown_doc\",\n    \"html_doc\",\n    \"control_table\"\n  ],\n  \"full_relation_name\": \"production.ecommerce.inventory.books\",\n  \"dsd\": \"ecommerce.inventory.books\",\n  \"environment\": \"production\",\n  \"domain_name\": null,\n  \"schema_name\": null,\n  \"relation_name\": null,\n  \"service_role\": \"\",\n  \"script_bucket\": \"${admin_bucket}\",\n  \"temp_s3_location\": null,\n  \"storage_bucket\": \"${data_bucket}/${deployment_id}/production.ecommerce.inventory.books\",\n  \"state_bucket\": \"${admin_bucket}\",\n  \"storage_format\": \"parquet\",\n  \"source_relation_prefix\": null,\n  \"etl_job_name\": \"nightly_batch\",\n  \"etl_job_schedule\": \"cron(0 0 * * ? *)\",\n  \"attributes\": [\n    {\n      \"name\": \"item_number\",\n      \"required\": false,\n      \"expression\": \"item_number\",\n      \"data_type\": \"integer\",\n      \"field_type\": null,\n      \"cast_type\": \"integer\"\n    },\n    {\n      \"name\": \"title\",\n      \"required\": false,\n      \"expression\": \"title\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"author\",\n      \"required\": false,\n      \"expression\": \"author\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"price\",\n      \"required\": false,\n      \"expression\": \"price\",\n      \"data_type\": \"numeric(10,2)\",\n      \"field_type\": null,\n      \"cast_type\": \"decimal(10,2)\"\n    },\n    {\n      \"name\": \"part_id\",\n      \"required\": false,\n      \"expression\": \"substring(md5(title),1,1)\",\n      \"data_type\": \"varchar(100)\",\n      \"field_type\": null,\n      \"cast_type\": \"string\"\n    },\n    {\n      \"name\": \"retail_markup\",\n      \"required\": false,\n      \"expression\": \"price * 0.25\",\n      \"data_type\": \"numeric(10,2)\",\n      \"field_type\": null,\n      \"cast_type\": \"decimal(10,2)\"\n    }\n  ],\n  \"partitions\": [\n    \"part_id\"\n  ],\n  \"relation_type\": 1,\n  \"source_dsd_name\": \"ecommerce.inventory.books_source\",\n  \"full_source_relation_name\": \"production.ecommerce.inventory.books_source\",\n  \"source_structure\": {\n    \"generators\": [\n      \"s3_source\",\n      \"markdown_doc\",\n      \"html_doc\"\n    ],\n    \"dsd\": \"ecommerce.inventory.books_source\",\n    \"full_relation_name\": \"production.ecommerce.inventory.books_source\",\n    \"environment\": \"production\",\n    \"domain_name\": null,\n    \"schema_name\": null,\n    \"relation_name\": null,\n    \"storage_bucket\": \"demo-source-us-west-2.beyondsoft.us\",\n    \"storage_format\": \"json\",\n    \"attributes\": [\n      {\n        \"name\": \"item_number\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"integer\",\n        \"field_type\": null,\n        \"cast_type\": \"integer\"\n      },\n      {\n        \"name\": \"title\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"varchar(100)\",\n        \"field_type\": null,\n        \"cast_type\": \"string\"\n      },\n      {\n        \"name\": \"author\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"varchar(100)\",\n        \"field_type\": null,\n        \"cast_type\": \"string\"\n      },\n      {\n        \"name\": \"price\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"numeric(10,2)\",\n        \"field_type\": null,\n        \"cast_type\": \"decimal(10,2)\"\n      },\n      {\n        \"name\": \"stock\",\n        \"required\": false,\n        \"expression\": null,\n        \"data_type\": \"integer\",\n        \"field_type\": null,\n        \"cast_type\": \"integer\"\n      }\n    ],\n    \"partitions\": [\n\n    ],\n    \"relation_type\": 0,\n    \"source_dsd_name\": null,\n    \"working_path\": \"/coding/demo/demo2\"\n  },\n  \"working_path\": \"/coding/demo/demo2\",\n  \"deployment_id\": \"${deployment_id}\",\n  \"region\": \"${region}\"\n}\n\"\"\",\nlambda doc : {\n  \"item_number\" : doc.get(\"item_number\",None),\n  \"title\" : doc.get(\"title\",None),\n  \"author\" : doc.get(\"author\",None),\n  \"price\" : doc.get(\"price\",None),\n  \"stock\" : doc.get(\"stock\",None)\n}\n)\n\n",
                            "vars.%": "4",
                            "vars.admin_bucket": "convergdb-admin-f13f80a0c63d373f",
                            "vars.data_bucket": "convergdb-data-f13f80a0c63d373f",
                            "vars.deployment_id": "15302509696417528321",
                            "vars.region": "us-west-2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "random_id.module_id": {
                    "type": "random_id",
                    "depends_on": [],
                    "primary": {
                        "id": "Jy_xv1qGEE8",
                        "attributes": {
                            "b64": "Jy_xv1qGEE8",
                            "b64_std": "Jy/xv1qGEE8=",
                            "b64_url": "Jy_xv1qGEE8",
                            "byte_length": "8",
                            "dec": "2823741295544373327",
                            "hex": "272ff1bf5a86104f",
                            "id": "Jy_xv1qGEE8"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "convergdb_athena_databases_stack"
            ],
            "outputs": {
                "database_stack_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e"
                }
            },
            "resources": {
                "aws_cloudformation_stack.athena_database_stack": {
                    "type": "aws_cloudformation_stack",
                    "depends_on": [
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e",
                        "attributes": {
                            "disable_rollback": "false",
                            "iam_role_arn": "",
                            "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e",
                            "name": "convergdb-tf-db-15302509696417528321-8115201757802509580",
                            "outputs.%": "0",
                            "parameters.%": "0",
                            "tags.%": "2",
                            "tags.convergdb:deployment": "15302509696417528321",
                            "tags.convergdb:module": "8115201757802509580",
                            "template_body": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB databases in Glue catalog\",\"Resources\":{\"convergdbDatabase0f2c2b67391871166209e026d71b0e7fbe177601d84c726d853d5cc67527a695\":{\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseInput\":{\"Name\":\"production__ecommerce__inventory\",\"Parameters\":{\"convergdb_deployment_id\":\"15302509696417528321\"}}},\"Type\":\"AWS::Glue::Database\"},\"convergdbDatabase8f8b7b7dbef56a7107959ac8d35ab9f134325cfbba41f020efef5a037f523c1b\":{\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseInput\":{\"Name\":\"convergdb_control_15302509696417528321\",\"Parameters\":{\"convergdb_deployment_id\":\"15302509696417528321\"}}},\"Type\":\"AWS::Glue::Database\"}}}"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 1800000000000,
                                "delete": 1800000000000,
                                "update": 1800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "random_id.module_id": {
                    "type": "random_id",
                    "depends_on": [],
                    "primary": {
                        "id": "cJ79AKZxtQw",
                        "attributes": {
                            "b64": "cJ79AKZxtQw",
                            "b64_std": "cJ79AKZxtQw=",
                            "b64_url": "cJ79AKZxtQw",
                            "byte_length": "8",
                            "dec": "8115201757802509580",
                            "hex": "709efd00a671b50c",
                            "id": "cJ79AKZxtQw"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "relations__3b"
            ],
            "outputs": {},
            "resources": {
                "aws_cloudformation_stack.athena_relation_stack": {
                    "type": "aws_cloudformation_stack",
                    "depends_on": [
                        "aws_s3_bucket_object.stack",
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-relations-3b-15302509696417528321/35c2b040-0c62-11e8-bf41-503ac9316829",
                        "attributes": {
                            "disable_rollback": "false",
                            "iam_role_arn": "",
                            "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-relations-3b-15302509696417528321/35c2b040-0c62-11e8-bf41-503ac9316829",
                            "name": "convergdb-relations-3b-15302509696417528321",
                            "outputs.%": "0",
                            "parameters.%": "0",
                            "tags.%": "2",
                            "tags.convergdb:deployment": "15302509696417528321",
                            "tags.convergdb:module": "9788751588024136202",
                            "template_body": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbControlTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseName\":\"convergdb_control_15302509696417528321\",\"TableInput\":{\"Name\":\"production__ecommerce__inventory__books\",\"Owner\":\"hadoop\",\"Parameters\":{\"EXTERNAL\":\"TRUE\",\"classification\":\"json\",\"convergdb_database_cf_id\":\"arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e\",\"convergdb_deployment_id\":\"15302509696417528321\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"convergdb-admin-f13f80a0c63d373f\",\"convergdb_storage_format\":\"parquet\"},\"PartitionKeys\":[],\"Retention\":0,\"StorageDescriptor\":{\"BucketColumns\":[],\"Columns\":[{\"Comment\":\"\",\"Name\":\"convergdb_batch_id\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"batch_start_time\",\"Type\":\"timestamp\"},{\"Comment\":\"\",\"Name\":\"batch_end_time\",\"Type\":\"timestamp\"},{\"Comment\":\"\",\"Name\":\"source_type\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"source_format\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"source_relation\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"source_bucket\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"source_key\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"load_type\",\"Type\":\"string\"},{\"Comment\":\"\",\"Name\":\"status\",\"Type\":\"string\"}],\"Compressed\":false,\"InputFormat\":\"org.apache.hadoop.mapred.TextInputFormat\",\"Location\":\"s3://convergdb-admin-f13f80a0c63d373f/15302509696417528321/state/production.ecommerce.inventory.books/control\",\"NumberOfBuckets\":-1,\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\",\"Parameters\":{},\"SerdeInfo\":{\"Parameters\":{\"serialization.format\":\"1\"},\"SerializationLibrary\":\"org.apache.hive.hcatalog.data.JsonSerDe\"},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"SortColumns\":[],\"StoredAsSubDirectories\":false},\"TableType\":\"EXTERNAL_TABLE\"}},\"Type\":\"AWS::Glue::Table\"}}}",
                            "template_url": "https://s3.amazonaws.com/convergdb-admin-f13f80a0c63d373f/15302509696417528321/cloudformation/relations-3b_15302509696417528321.json"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 1800000000000,
                                "delete": 1800000000000,
                                "update": 1800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_s3_bucket_object.stack": {
                    "type": "aws_s3_bucket_object",
                    "depends_on": [
                        "data.template_file.stack"
                    ],
                    "primary": {
                        "id": "15302509696417528321/cloudformation/relations-3b_15302509696417528321.json",
                        "attributes": {
                            "acl": "private",
                            "bucket": "convergdb-admin-f13f80a0c63d373f",
                            "cache_control": "",
                            "content": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbControlTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Type\":\"AWS::Glue::Table\",\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseName\":\"convergdb_control_15302509696417528321\",\"TableInput\":{\"StorageDescriptor\":{\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\",\"SortColumns\":[],\"InputFormat\":\"org.apache.hadoop.mapred.TextInputFormat\",\"SerdeInfo\":{\"SerializationLibrary\":\"org.apache.hive.hcatalog.data.JsonSerDe\",\"Parameters\":{\"serialization.format\":\"1\"}},\"BucketColumns\":[],\"Parameters\":{},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"Location\":\"s3://convergdb-admin-f13f80a0c63d373f/15302509696417528321/state/production.ecommerce.inventory.books/control\",\"NumberOfBuckets\":-1,\"StoredAsSubDirectories\":false,\"Columns\":[{\"Name\":\"convergdb_batch_id\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"batch_start_time\",\"Type\":\"timestamp\",\"Comment\":\"\"},{\"Name\":\"batch_end_time\",\"Type\":\"timestamp\",\"Comment\":\"\"},{\"Name\":\"source_type\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_format\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_relation\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_bucket\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_key\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"load_type\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"status\",\"Type\":\"string\",\"Comment\":\"\"}],\"Compressed\":false},\"PartitionKeys\":[],\"Name\":\"production__ecommerce__inventory__books\",\"Parameters\":{\"classification\":\"json\",\"EXTERNAL\":\"TRUE\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"convergdb-admin-f13f80a0c63d373f\",\"convergdb_storage_format\":\"parquet\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_deployment_id\":\"15302509696417528321\",\"convergdb_database_cf_id\":\"arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e\"},\"TableType\":\"EXTERNAL_TABLE\",\"Owner\":\"hadoop\",\"Retention\":0}}}}}\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "binary/octet-stream",
                            "etag": "0bf3c03af6119db867714e5c5c6971fd",
                            "id": "15302509696417528321/cloudformation/relations-3b_15302509696417528321.json",
                            "key": "15302509696417528321/cloudformation/relations-3b_15302509696417528321.json",
                            "server_side_encryption": "",
                            "storage_class": "STANDARD",
                            "tags.%": "0",
                            "version_id": "INcMNIj8TvIszBJBgIz1IRF7tFhkqRq1",
                            "website_redirect": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.stack": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "2b39a93ccc70aeb855fd64d8e5d27898bf4f10f85c9395b618134382d4dfe27c",
                        "attributes": {
                            "id": "2b39a93ccc70aeb855fd64d8e5d27898bf4f10f85c9395b618134382d4dfe27c",
                            "rendered": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbControlTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Type\":\"AWS::Glue::Table\",\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseName\":\"convergdb_control_15302509696417528321\",\"TableInput\":{\"StorageDescriptor\":{\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\",\"SortColumns\":[],\"InputFormat\":\"org.apache.hadoop.mapred.TextInputFormat\",\"SerdeInfo\":{\"SerializationLibrary\":\"org.apache.hive.hcatalog.data.JsonSerDe\",\"Parameters\":{\"serialization.format\":\"1\"}},\"BucketColumns\":[],\"Parameters\":{},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"Location\":\"s3://convergdb-admin-f13f80a0c63d373f/15302509696417528321/state/production.ecommerce.inventory.books/control\",\"NumberOfBuckets\":-1,\"StoredAsSubDirectories\":false,\"Columns\":[{\"Name\":\"convergdb_batch_id\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"batch_start_time\",\"Type\":\"timestamp\",\"Comment\":\"\"},{\"Name\":\"batch_end_time\",\"Type\":\"timestamp\",\"Comment\":\"\"},{\"Name\":\"source_type\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_format\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_relation\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_bucket\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_key\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"load_type\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"status\",\"Type\":\"string\",\"Comment\":\"\"}],\"Compressed\":false},\"PartitionKeys\":[],\"Name\":\"production__ecommerce__inventory__books\",\"Parameters\":{\"classification\":\"json\",\"EXTERNAL\":\"TRUE\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"convergdb-admin-f13f80a0c63d373f\",\"convergdb_storage_format\":\"parquet\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_deployment_id\":\"15302509696417528321\",\"convergdb_database_cf_id\":\"arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e\"},\"TableType\":\"EXTERNAL_TABLE\",\"Owner\":\"hadoop\",\"Retention\":0}}}}}\n",
                            "template": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbControlTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Type\":\"AWS::Glue::Table\",\"Properties\":{\"CatalogId\":\"${aws_account_id}\",\"DatabaseName\":\"convergdb_control_${deployment_id}\",\"TableInput\":{\"StorageDescriptor\":{\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\",\"SortColumns\":[],\"InputFormat\":\"org.apache.hadoop.mapred.TextInputFormat\",\"SerdeInfo\":{\"SerializationLibrary\":\"org.apache.hive.hcatalog.data.JsonSerDe\",\"Parameters\":{\"serialization.format\":\"1\"}},\"BucketColumns\":[],\"Parameters\":{},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"Location\":\"s3://${admin_bucket}/${deployment_id}/state/production.ecommerce.inventory.books/control\",\"NumberOfBuckets\":-1,\"StoredAsSubDirectories\":false,\"Columns\":[{\"Name\":\"convergdb_batch_id\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"batch_start_time\",\"Type\":\"timestamp\",\"Comment\":\"\"},{\"Name\":\"batch_end_time\",\"Type\":\"timestamp\",\"Comment\":\"\"},{\"Name\":\"source_type\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_format\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_relation\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_bucket\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"source_key\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"load_type\",\"Type\":\"string\",\"Comment\":\"\"},{\"Name\":\"status\",\"Type\":\"string\",\"Comment\":\"\"}],\"Compressed\":false},\"PartitionKeys\":[],\"Name\":\"production__ecommerce__inventory__books\",\"Parameters\":{\"classification\":\"json\",\"EXTERNAL\":\"TRUE\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"${admin_bucket}\",\"convergdb_storage_format\":\"parquet\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_deployment_id\":\"${deployment_id}\",\"convergdb_database_cf_id\":\"${database_stack_id}\"},\"TableType\":\"EXTERNAL_TABLE\",\"Owner\":\"hadoop\",\"Retention\":0}}}}}\n",
                            "vars.%": "5",
                            "vars.admin_bucket": "convergdb-admin-f13f80a0c63d373f",
                            "vars.aws_account_id": "692977618922",
                            "vars.data_bucket": "convergdb-data-f13f80a0c63d373f",
                            "vars.database_stack_id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e",
                            "vars.deployment_id": "15302509696417528321"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "random_id.module_id": {
                    "type": "random_id",
                    "depends_on": [],
                    "primary": {
                        "id": "h9ihtM64Mgo",
                        "attributes": {
                            "b64": "h9ihtM64Mgo",
                            "b64_std": "h9ihtM64Mgo=",
                            "b64_url": "h9ihtM64Mgo",
                            "byte_length": "8",
                            "dec": "9788751588024136202",
                            "hex": "87d8a1b4ceb8320a",
                            "id": "h9ihtM64Mgo"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "relations__6a"
            ],
            "outputs": {},
            "resources": {
                "aws_cloudformation_stack.athena_relation_stack": {
                    "type": "aws_cloudformation_stack",
                    "depends_on": [
                        "aws_s3_bucket_object.stack",
                        "random_id.module_id"
                    ],
                    "primary": {
                        "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-relations-6a-15302509696417528321/35a64ea0-0c62-11e8-a4b6-50a68a0e322a",
                        "attributes": {
                            "disable_rollback": "false",
                            "iam_role_arn": "",
                            "id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-relations-6a-15302509696417528321/35a64ea0-0c62-11e8-a4b6-50a68a0e322a",
                            "name": "convergdb-relations-6a-15302509696417528321",
                            "outputs.%": "0",
                            "parameters.%": "0",
                            "tags.%": "2",
                            "tags.convergdb:deployment": "15302509696417528321",
                            "tags.convergdb:module": "11407199185512919152",
                            "template_body": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseName\":\"production__ecommerce__inventory\",\"TableInput\":{\"Name\":\"books\",\"Owner\":\"hadoop\",\"Parameters\":{\"EXTERNAL\":\"TRUE\",\"classification\":\"parquet\",\"convergdb_database_cf_id\":\"arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e\",\"convergdb_deployment_id\":\"15302509696417528321\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_state_bucket\":\"convergdb-admin-f13f80a0c63d373f\",\"convergdb_storage_bucket\":\"convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books\",\"convergdb_storage_format\":\"parquet\"},\"PartitionKeys\":[{\"Comment\":\"substring(md5(title),1,1)\",\"Name\":\"part_id\",\"Type\":\"string\"}],\"Retention\":0,\"StorageDescriptor\":{\"BucketColumns\":[],\"Columns\":[{\"Comment\":\"item_number\",\"Name\":\"item_number\",\"Type\":\"int\"},{\"Comment\":\"title\",\"Name\":\"title\",\"Type\":\"string\"},{\"Comment\":\"author\",\"Name\":\"author\",\"Type\":\"string\"},{\"Comment\":\"price\",\"Name\":\"price\",\"Type\":\"decimal(10,2)\"},{\"Comment\":\"price * 0.25\",\"Name\":\"retail_markup\",\"Type\":\"decimal(10,2)\"}],\"Compressed\":false,\"InputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat\",\"Location\":\"s3://convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books/\",\"NumberOfBuckets\":-1,\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat\",\"Parameters\":{},\"SerdeInfo\":{\"Parameters\":{\"serialization.format\":\"1\"},\"SerializationLibrary\":\"org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe\"},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"SortColumns\":[],\"StoredAsSubDirectories\":false},\"TableType\":\"EXTERNAL_TABLE\"}},\"Type\":\"AWS::Glue::Table\"}}}",
                            "template_url": "https://s3.amazonaws.com/convergdb-admin-f13f80a0c63d373f/15302509696417528321/cloudformation/relations-6a_15302509696417528321.json"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 1800000000000,
                                "delete": 1800000000000,
                                "update": 1800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "aws.myregion"
                },
                "aws_s3_bucket_object.stack": {
                    "type": "aws_s3_bucket_object",
                    "depends_on": [
                        "data.template_file.stack"
                    ],
                    "primary": {
                        "id": "15302509696417528321/cloudformation/relations-6a_15302509696417528321.json",
                        "attributes": {
                            "acl": "private",
                            "bucket": "convergdb-admin-f13f80a0c63d373f",
                            "cache_control": "",
                            "content": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Type\":\"AWS::Glue::Table\",\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseName\":\"production__ecommerce__inventory\",\"TableInput\":{\"StorageDescriptor\":{\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat\",\"SortColumns\":[],\"InputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat\",\"SerdeInfo\":{\"SerializationLibrary\":\"org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe\",\"Parameters\":{\"serialization.format\":\"1\"}},\"BucketColumns\":[],\"Parameters\":{},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"Location\":\"s3://convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books/\",\"NumberOfBuckets\":-1,\"StoredAsSubDirectories\":false,\"Columns\":[{\"Name\":\"item_number\",\"Type\":\"int\",\"Comment\":\"item_number\"},{\"Name\":\"title\",\"Type\":\"string\",\"Comment\":\"title\"},{\"Name\":\"author\",\"Type\":\"string\",\"Comment\":\"author\"},{\"Name\":\"price\",\"Type\":\"decimal(10,2)\",\"Comment\":\"price\"},{\"Name\":\"retail_markup\",\"Type\":\"decimal(10,2)\",\"Comment\":\"price * 0.25\"}],\"Compressed\":false},\"PartitionKeys\":[{\"Name\":\"part_id\",\"Type\":\"string\",\"Comment\":\"substring(md5(title),1,1)\"}],\"Name\":\"books\",\"Parameters\":{\"classification\":\"parquet\",\"EXTERNAL\":\"TRUE\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books\",\"convergdb_state_bucket\":\"convergdb-admin-f13f80a0c63d373f\",\"convergdb_storage_format\":\"parquet\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_deployment_id\":\"15302509696417528321\",\"convergdb_database_cf_id\":\"arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e\"},\"TableType\":\"EXTERNAL_TABLE\",\"Owner\":\"hadoop\",\"Retention\":0}}}}}\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "binary/octet-stream",
                            "etag": "6e540f53aa4eff9c9fec7c46af6fc9ee",
                            "id": "15302509696417528321/cloudformation/relations-6a_15302509696417528321.json",
                            "key": "15302509696417528321/cloudformation/relations-6a_15302509696417528321.json",
                            "server_side_encryption": "",
                            "storage_class": "STANDARD",
                            "tags.%": "0",
                            "version_id": "8xuFbGHnNssbLD225n9ManZIAhmIMyYW",
                            "website_redirect": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.stack": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "8bc71222685c97c3502a4ff8bec9351861d89150d4e9286127368eb0cad7788b",
                        "attributes": {
                            "id": "8bc71222685c97c3502a4ff8bec9351861d89150d4e9286127368eb0cad7788b",
                            "rendered": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Type\":\"AWS::Glue::Table\",\"Properties\":{\"CatalogId\":\"692977618922\",\"DatabaseName\":\"production__ecommerce__inventory\",\"TableInput\":{\"StorageDescriptor\":{\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat\",\"SortColumns\":[],\"InputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat\",\"SerdeInfo\":{\"SerializationLibrary\":\"org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe\",\"Parameters\":{\"serialization.format\":\"1\"}},\"BucketColumns\":[],\"Parameters\":{},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"Location\":\"s3://convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books/\",\"NumberOfBuckets\":-1,\"StoredAsSubDirectories\":false,\"Columns\":[{\"Name\":\"item_number\",\"Type\":\"int\",\"Comment\":\"item_number\"},{\"Name\":\"title\",\"Type\":\"string\",\"Comment\":\"title\"},{\"Name\":\"author\",\"Type\":\"string\",\"Comment\":\"author\"},{\"Name\":\"price\",\"Type\":\"decimal(10,2)\",\"Comment\":\"price\"},{\"Name\":\"retail_markup\",\"Type\":\"decimal(10,2)\",\"Comment\":\"price * 0.25\"}],\"Compressed\":false},\"PartitionKeys\":[{\"Name\":\"part_id\",\"Type\":\"string\",\"Comment\":\"substring(md5(title),1,1)\"}],\"Name\":\"books\",\"Parameters\":{\"classification\":\"parquet\",\"EXTERNAL\":\"TRUE\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"convergdb-data-f13f80a0c63d373f/15302509696417528321/production.ecommerce.inventory.books\",\"convergdb_state_bucket\":\"convergdb-admin-f13f80a0c63d373f\",\"convergdb_storage_format\":\"parquet\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_deployment_id\":\"15302509696417528321\",\"convergdb_database_cf_id\":\"arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e\"},\"TableType\":\"EXTERNAL_TABLE\",\"Owner\":\"hadoop\",\"Retention\":0}}}}}\n",
                            "template": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"Create ConvergDB tables in Glue catalog\",\"Resources\":{\"convergdbTable30a66ab4112c782ce15fda913851b83b3edd28c1cc3bb58a106fc915ad43bcac\":{\"Type\":\"AWS::Glue::Table\",\"Properties\":{\"CatalogId\":\"${aws_account_id}\",\"DatabaseName\":\"production__ecommerce__inventory\",\"TableInput\":{\"StorageDescriptor\":{\"OutputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat\",\"SortColumns\":[],\"InputFormat\":\"org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat\",\"SerdeInfo\":{\"SerializationLibrary\":\"org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe\",\"Parameters\":{\"serialization.format\":\"1\"}},\"BucketColumns\":[],\"Parameters\":{},\"SkewedInfo\":{\"SkewedColumnNames\":[],\"SkewedColumnValueLocationMaps\":{},\"SkewedColumnValues\":[]},\"Location\":\"s3://${data_bucket}/${deployment_id}/production.ecommerce.inventory.books/\",\"NumberOfBuckets\":-1,\"StoredAsSubDirectories\":false,\"Columns\":[{\"Name\":\"item_number\",\"Type\":\"int\",\"Comment\":\"item_number\"},{\"Name\":\"title\",\"Type\":\"string\",\"Comment\":\"title\"},{\"Name\":\"author\",\"Type\":\"string\",\"Comment\":\"author\"},{\"Name\":\"price\",\"Type\":\"decimal(10,2)\",\"Comment\":\"price\"},{\"Name\":\"retail_markup\",\"Type\":\"decimal(10,2)\",\"Comment\":\"price * 0.25\"}],\"Compressed\":false},\"PartitionKeys\":[{\"Name\":\"part_id\",\"Type\":\"string\",\"Comment\":\"substring(md5(title),1,1)\"}],\"Name\":\"books\",\"Parameters\":{\"classification\":\"parquet\",\"EXTERNAL\":\"TRUE\",\"convergdb_full_relation_name\":\"production.ecommerce.inventory.books\",\"convergdb_dsd\":\"ecommerce.inventory.books\",\"convergdb_storage_bucket\":\"${data_bucket}/${deployment_id}/production.ecommerce.inventory.books\",\"convergdb_state_bucket\":\"${admin_bucket}\",\"convergdb_storage_format\":\"parquet\",\"convergdb_etl_job_name\":\"nightly_batch\",\"convergdb_deployment_id\":\"${deployment_id}\",\"convergdb_database_cf_id\":\"${database_stack_id}\"},\"TableType\":\"EXTERNAL_TABLE\",\"Owner\":\"hadoop\",\"Retention\":0}}}}}\n",
                            "vars.%": "5",
                            "vars.admin_bucket": "convergdb-admin-f13f80a0c63d373f",
                            "vars.aws_account_id": "692977618922",
                            "vars.data_bucket": "convergdb-data-f13f80a0c63d373f",
                            "vars.database_stack_id": "arn:aws:cloudformation:us-west-2:692977618922:stack/convergdb-tf-db-15302509696417528321-8115201757802509580/2b9d2f50-0c62-11e8-a93f-50d5ca789e1e",
                            "vars.deployment_id": "15302509696417528321"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "random_id.module_id": {
                    "type": "random_id",
                    "depends_on": [],
                    "primary": {
                        "id": "nk6DOKafcHA",
                        "attributes": {
                            "b64": "nk6DOKafcHA",
                            "b64_std": "nk6DOKafcHA=",
                            "b64_url": "nk6DOKafcHA",
                            "byte_length": "8",
                            "dec": "11407199185512919152",
                            "hex": "9e4e8338a69f7070",
                            "id": "nk6DOKafcHA"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        }
    ]
}
